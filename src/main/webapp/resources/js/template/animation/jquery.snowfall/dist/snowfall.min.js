if(!Date.now){Date.now=function(){return new Date().getTime()}}(function(){var d=["webkit","moz"];for(var b=0;b<d.length&&!window.requestAnimationFrame;++b){var a=d[b];window.requestAnimationFrame=window[a+"RequestAnimationFrame"];window.cancelAnimationFrame=(window[a+"CancelAnimationFrame"]||window[a+"CancelRequestAnimationFrame"])}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var c=0;window.requestAnimationFrame=function(g){var f=Date.now();var e=Math.max(c+16,f);return setTimeout(function(){g(c=e)},e-f)};window.cancelAnimationFrame=clearTimeout}}());var snowFall=(function(){function a(){var e={flakeCount:35,flakeColor:"#ffffff",flakeIndex:999999,flakePosition:"absolute",minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:false,shadow:false,collection:false,image:false,collectionHeight:40},m=[],g={},h=0,n=0,d=0,c=0,l=function(q,o){for(var p in o){if(q.hasOwnProperty(p)){q[p]=o[p]}}},b=function b(p,o){return Math.round(p+Math.random()*(o-p))},k=function(o,p){for(var q in p){o.style[q]=p[q]+((q=="width"||q=="height")?"px":"")}},f=function(r,p,o){this.x=b(d,n-d);this.y=b(0,h);this.size=p;this.speed=o;this.step=0;this.stepSize=b(1,10)/100;if(e.collection){this.target=canvasCollection[b(0,canvasCollection.length-1)]}var q=null;if(e.image){q=new Image();q.src=e.image}else{q=document.createElement("div");k(q,{background:e.flakeColor})}q.className="snowfall-flakes";k(q,{width:this.size,height:this.size,position:e.flakePosition,top:this.y,left:this.x,fontSize:0,zIndex:e.flakeIndex});if(e.round){k(q,{"-moz-border-radius":~~(e.maxSize)+"px","-webkit-border-radius":~~(e.maxSize)+"px",borderRadius:~~(e.maxSize)+"px"})}if(e.shadow){k(q,{"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555",boxShadow:"1px 1px 1px #555"})}if(r.tagName===document.body.tagName){document.body.appendChild(q)}else{r.appendChild(q)}this.element=q;this.update=function(){this.y+=this.speed;if(this.y>h-(this.size+6)){this.reset()}this.element.style.top=this.y+"px";this.element.style.left=this.x+"px";this.step+=this.stepSize;this.x+=Math.cos(this.step);if(this.x+this.size>n-d||this.x<d){this.reset()}};this.reset=function(){this.y=0;this.x=b(d,n-d);this.stepSize=b(1,10)/100;this.size=b((e.minSize*100),(e.maxSize*100))/100;this.element.style.width=this.size+"px";this.element.style.height=this.size+"px";this.speed=b(e.minSpeed,e.maxSpeed)}},j=function(){for(var o=0;o<m.length;o+=1){m[o].update()}c=requestAnimationFrame(function(){j()})};return{snow:function(p,o){l(e,o);g=p;h=g.offsetHeight;n=g.offsetWidth;g.snow=this;if(g.tagName.toLowerCase()==="body"){d=25}window.addEventListener("resize",function(){h=g.clientHeight;n=g.offsetWidth},true);for(i=0;i<e.flakeCount;i+=1){m.push(new f(g,b((e.minSize*100),(e.maxSize*100))/100,b(e.minSpeed,e.maxSpeed)))}j()},clear:function(){var p=null;if(!g.getElementsByClassName){p=g.querySelectorAll(".snowfall-flakes")}else{p=g.getElementsByClassName("snowfall-flakes")}var o=p.length;while(o--){if(p[o].parentNode===g){g.removeChild(p[o])}}cancelAnimationFrame(c)}}}return{snow:function(d,b){if(typeof(b)=="string"){if(d.length>0){for(var c=0;c<d.length;c++){if(d[c].snow){d[c].snow.clear()}}}else{d.snow.clear()}}else{if(d.length>0){for(var c=0;c<d.length;c++){new a().snow(d[c],b)}}else{new a().snow(d,b)}}}}})();